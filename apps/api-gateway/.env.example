# ===========================================
# API GATEWAY - ENVIRONMENT CONFIGURATION
# ===========================================
# Copy this file to .env and update the values for your environment

# ===========================================
# SERVICE CONFIGURATION
# ===========================================
NODE_ENV=development
PORT=3000
SERVICE_NAME=api-gateway

# ===========================================
# REDIS CONFIGURATION
# ===========================================
# Redis for API Gateway caching and rate limiting
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=gateway_redis_123
REDIS_DB=0

# ===========================================
# SERVICE ROUTING CONFIGURATION
# ===========================================
# Service URLs and ports
AUTH_SERVICE_URL=http://localhost:3001
VEHICLE_SERVICE_URL=http://localhost:3002
BOOKING_SERVICE_URL=http://localhost:3003
PAYMENT_SERVICE_URL=http://localhost:3004
NOTIFICATION_SERVICE_URL=http://localhost:3005
LOCATION_SERVICE_URL=http://localhost:3006
REVIEW_SERVICE_URL=http://localhost:3007
FILE_UPLOAD_SERVICE_URL=http://localhost:3008

# ===========================================
# API CONFIGURATION
# ===========================================
# API versioning
API_VERSION=v1
API_PREFIX=/api/v1

# CORS configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:19006,http://localhost:8080
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# JWT configuration for token validation
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256

# API Key configuration
API_KEY_HEADER=X-API-Key
API_KEY_SECRET=your-api-key-secret-change-this-in-production

# ===========================================
# RATE LIMITING CONFIGURATION
# ===========================================
# Global rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# Per-endpoint rate limiting
AUTH_RATE_LIMIT_MAX_REQUESTS=10
AUTH_RATE_LIMIT_WINDOW_MS=900000

PAYMENT_RATE_LIMIT_MAX_REQUESTS=5
PAYMENT_RATE_LIMIT_WINDOW_MS=300000

UPLOAD_RATE_LIMIT_MAX_REQUESTS=3
UPLOAD_RATE_LIMIT_WINDOW_MS=3600000

# ===========================================
# CACHING CONFIGURATION
# ===========================================
# Cache settings
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000
CACHE_ENABLED=true

# Cache keys
CACHE_KEY_PREFIX=gateway:
CACHE_KEY_SEPARATOR=:

# ===========================================
# LOAD BALANCING CONFIGURATION
# ===========================================
# Load balancing strategy
LOAD_BALANCE_STRATEGY=round_robin
HEALTH_CHECK_INTERVAL_MS=30000
HEALTH_CHECK_TIMEOUT_MS=5000

# Circuit breaker configuration
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=60000
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=30000

# ===========================================
# REQUEST/RESPONSE CONFIGURATION
# ===========================================
# Request timeout
REQUEST_TIMEOUT_MS=30000
REQUEST_RETRY_ATTEMPTS=3
REQUEST_RETRY_DELAY_MS=1000

# Response compression
ENABLE_COMPRESSION=true
COMPRESSION_THRESHOLD=1024

# Request/Response logging
LOG_REQUESTS=true
LOG_RESPONSES=false
LOG_LEVEL=info

# ===========================================
# MONITORING CONFIGURATION
# ===========================================
# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health check endpoints
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready
LIVENESS_CHECK_PATH=/live

# ===========================================
# SSL/TLS CONFIGURATION
# ===========================================
# SSL configuration
SSL_ENABLED=false
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem
SSL_CA_PATH=/path/to/ca.pem

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_PATH=/var/log/api-gateway.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# ===========================================
# DEVELOPMENT CONFIGURATION
# ===========================================
# Development mode settings
DEV_MODE=true
DEV_CORS_ALLOW_ALL=true
DEV_LOG_LEVEL=debug
DEV_ENABLE_SWAGGER=true
SWAGGER_PATH=/api-docs
