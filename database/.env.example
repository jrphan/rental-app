# ===========================================
# DATABASE CONFIGURATION - ENVIRONMENT VARIABLES
# ===========================================
# Copy this file to .env and update the values for your environment
# This file contains all database-related environment variables

# ===========================================
# POSTGRESQL CONFIGURATIONS
# ===========================================

# Auth Service Database
POSTGRES_AUTH_HOST=localhost
POSTGRES_AUTH_PORT=5432
POSTGRES_AUTH_DB=rental_auth
POSTGRES_AUTH_USER=auth_user
POSTGRES_AUTH_PASSWORD=auth_password_123
POSTGRES_AUTH_URL=postgresql://auth_user:auth_password_123@localhost:5432/rental_auth

# Vehicle Service Database
POSTGRES_VEHICLE_HOST=localhost
POSTGRES_VEHICLE_PORT=5433
POSTGRES_VEHICLE_DB=rental_vehicle
POSTGRES_VEHICLE_USER=vehicle_user
POSTGRES_VEHICLE_PASSWORD=vehicle_password_123
POSTGRES_VEHICLE_URL=postgresql://vehicle_user:vehicle_password_123@localhost:5433/rental_vehicle

# Booking Service Database
POSTGRES_BOOKING_HOST=localhost
POSTGRES_BOOKING_PORT=5434
POSTGRES_BOOKING_DB=rental_booking
POSTGRES_BOOKING_USER=booking_user
POSTGRES_BOOKING_PASSWORD=booking_password_123
POSTGRES_BOOKING_URL=postgresql://booking_user:booking_password_123@localhost:5434/rental_booking

# Payment Service Database
POSTGRES_PAYMENT_HOST=localhost
POSTGRES_PAYMENT_PORT=5435
POSTGRES_PAYMENT_DB=rental_payment
POSTGRES_PAYMENT_USER=payment_user
POSTGRES_PAYMENT_PASSWORD=payment_password_123
POSTGRES_PAYMENT_URL=postgresql://payment_user:payment_password_123@localhost:5435/rental_payment

# Review Service Database
POSTGRES_REVIEW_HOST=localhost
POSTGRES_REVIEW_PORT=5436
POSTGRES_REVIEW_DB=rental_review
POSTGRES_REVIEW_USER=review_user
POSTGRES_REVIEW_PASSWORD=review_password_123
POSTGRES_REVIEW_URL=postgresql://review_user:review_password_123@localhost:5436/rental_review

# ===========================================
# REDIS CONFIGURATIONS
# ===========================================

# Main Redis Instance
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password_123
REDIS_DB=0
REDIS_URL=redis://:redis_password_123@localhost:6379/0

# API Gateway Redis Instance
REDIS_GATEWAY_HOST=localhost
REDIS_GATEWAY_PORT=6380
REDIS_GATEWAY_PASSWORD=gateway_redis_123
REDIS_GATEWAY_DB=0
REDIS_GATEWAY_URL=redis://:gateway_redis_123@localhost:6380/0

# ===========================================
# MONGODB CONFIGURATIONS
# ===========================================

# MongoDB Root Credentials
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=mongodb_password_123

# Files Service MongoDB
MONGO_FILES_HOST=localhost
MONGO_FILES_PORT=27017
MONGO_FILES_DB=rental_files
MONGO_FILES_URL=mongodb://admin:mongodb_password_123@localhost:27017/rental_files

# Notifications Service MongoDB
MONGO_NOTIFICATIONS_HOST=localhost
MONGO_NOTIFICATIONS_PORT=27018
MONGO_NOTIFICATIONS_DB=rental_notifications
MONGO_NOTIFICATIONS_URL=mongodb://admin:mongodb_password_123@localhost:27018/rental_notifications

# Location Service MongoDB
MONGO_LOCATION_HOST=localhost
MONGO_LOCATION_PORT=27019
MONGO_LOCATION_DB=rental_location
MONGO_LOCATION_URL=mongodb://admin:mongodb_password_123@localhost:27019/rental_location

# ===========================================
# DATABASE CONNECTION POOL SETTINGS
# ===========================================

# PostgreSQL Connection Pool
POSTGRES_POOL_MIN=2
POSTGRES_POOL_MAX=10
POSTGRES_POOL_IDLE_TIMEOUT=30000
POSTGRES_POOL_ACQUIRE_TIMEOUT=60000
POSTGRES_POOL_CREATE_TIMEOUT=30000

# Redis Connection Pool
REDIS_POOL_MIN=1
REDIS_POOL_MAX=5
REDIS_POOL_IDLE_TIMEOUT=30000
REDIS_POOL_ACQUIRE_TIMEOUT=60000

# MongoDB Connection Pool
MONGO_POOL_MIN=1
MONGO_POOL_MAX=5
MONGO_POOL_IDLE_TIMEOUT=30000
MONGO_POOL_ACQUIRE_TIMEOUT=60000

# ===========================================
# DATABASE PERFORMANCE SETTINGS
# ===========================================

# PostgreSQL Performance
POSTGRES_STATEMENT_TIMEOUT=30000
POSTGRES_IDLE_IN_TRANSACTION_SESSION_TIMEOUT=30000
POSTGRES_LOCK_TIMEOUT=10000
POSTGRES_LOG_STATEMENT=all
POSTGRES_LOG_MIN_DURATION_STATEMENT=1000

# Redis Performance
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_DELAY_ON_FAILOVER=100
REDIS_MAX_RETRIES_PER_REQUEST=3

# MongoDB Performance
MONGO_CONNECT_TIMEOUT=10000
MONGO_SOCKET_TIMEOUT=30000
MONGO_SERVER_SELECTION_TIMEOUT=5000
MONGO_MAX_POOL_SIZE=10
MONGO_MIN_POOL_SIZE=1

# ===========================================
# DATABASE BACKUP SETTINGS
# ===========================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/rental-app

# PostgreSQL Backup
POSTGRES_BACKUP_FORMAT=custom
POSTGRES_BACKUP_COMPRESSION=gzip
POSTGRES_BACKUP_PARALLEL_JOBS=4

# MongoDB Backup
MONGO_BACKUP_FORMAT=archive
MONGO_BACKUP_COMPRESSION=gzip
MONGO_BACKUP_PARALLEL_JOBS=2

# ===========================================
# DATABASE MONITORING SETTINGS
# ===========================================

# Monitoring Configuration
DB_MONITORING_ENABLED=true
DB_MONITORING_INTERVAL=60
DB_MONITORING_METRICS_PORT=9091

# Health Check Settings
DB_HEALTH_CHECK_ENABLED=true
DB_HEALTH_CHECK_INTERVAL=30
DB_HEALTH_CHECK_TIMEOUT=5000

# ===========================================
# DATABASE SECURITY SETTINGS
# ===========================================

# SSL/TLS Configuration
POSTGRES_SSL_MODE=prefer
POSTGRES_SSL_CERT_PATH=/path/to/postgres.crt
POSTGRES_SSL_KEY_PATH=/path/to/postgres.key
POSTGRES_SSL_CA_PATH=/path/to/ca.crt

MONGO_SSL_ENABLED=false
MONGO_SSL_CERT_PATH=/path/to/mongo.crt
MONGO_SSL_KEY_PATH=/path/to/mongo.key
MONGO_SSL_CA_PATH=/path/to/ca.crt

# Encryption at Rest
POSTGRES_ENCRYPTION_ENABLED=false
MONGO_ENCRYPTION_ENABLED=false
REDIS_ENCRYPTION_ENABLED=false

# ===========================================
# DEVELOPMENT/DATABASE SETTINGS
# ===========================================

# Development Database Settings
DEV_DATABASE_RESET_ENABLED=true
DEV_DATABASE_SEED_ENABLED=true
DEV_DATABASE_MIGRATION_AUTO=true

# Test Database Settings
TEST_DATABASE_PREFIX=test_
TEST_DATABASE_CLEANUP=true
TEST_DATABASE_ISOLATION=true
